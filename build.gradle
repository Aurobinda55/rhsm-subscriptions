plugins {
    id "checkstyle"
    id "org.springframework.boot" version "2.0.8.RELEASE"
}

allprojects {
    apply plugin: 'java'
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
    repositories {
        mavenCentral()
    }
}

checkstyle {
    toolVersion '8.16'
}

version = '1.0.0'

bootJar {
}

processResources {
    expand(project.properties)
}
ext {
    spring_version = '5.1.4.RELEASE'
    spring_boot_version = '2.1.2.RELEASE'
    junit_version = '5.3.2'
}
dependencies {
    compile project('api')
    compile project('insights-inventory-client')
    compile "javax.servlet:javax.servlet-api:3.1.0"
    compile "org.jboss.spec.javax.ws.rs:jboss-jaxrs-api_2.1_spec:1.0.2.Final"
    compile "org.springframework.boot:spring-boot-autoconfigure:$spring_boot_version"
    compile "org.springframework.boot:spring-boot:$spring_boot_version"
    compile "org.springframework:spring-beans:$spring_version"
    compile "org.springframework:spring-context:$spring_version"
    compile "org.slf4j:slf4j-api:1.7.25"
    compile "net.logstash.logback:logstash-logback-encoder:5.3"

    // Runtime deps that will be included in the result package but not on the compile classpath.  I.e.
    // implementations of APIs we are using.
    runtime "ch.qos.logback:logback-classic:1.2.3"
    runtime "org.jboss.resteasy:resteasy-spring-boot-starter:3.0.0.Final"
    runtime "org.jboss.resteasy:resteasy-jaxrs:3.6.2.Final"
    runtime "org.jboss.resteasy:resteasy-validator-provider-11:3.6.2.Final"
    runtime "org.hibernate.validator:hibernate-validator:6.0.14.Final"

    testCompile "org.springframework.boot:spring-boot-test:$spring_boot_version"
    testCompile "org.springframework:spring-test:$spring_version"
    testCompile "org.junit.jupiter:junit-jupiter-api:$junit_version"
    testRuntime "org.junit.jupiter:junit-jupiter-engine:$junit_version"

//    testCompile 'org.mockito:mockito-core:2.23.4'
//    testCompile 'org.mockito:mockito-junit-jupiter:2.23.4'
}

test {
    useJUnitPlatform()
}
